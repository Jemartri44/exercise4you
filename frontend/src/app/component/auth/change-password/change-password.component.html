<section class="position-relative py-4 py-xl-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-md-8 col-xl-6 text-center mx-auto">
            </div>
        </div>
        <div class="row d-flex justify-content-center">
            <div class="col-md-6 col-xl-4">
                <div class="card mb-5">
                    <div class="card-body d-flex flex-column align-items-center">
                        <h2>Reestablecer contraseña</h2>
                        <form autocomplete="on" class="text-center" [formGroup]="changePasswordForm" (ngSubmit)="changePassword()">
                            <p *ngIf="changePasswordError!=''" class="mb-4 alert alert-danger">{{changePasswordError}}</p>
                            <div *ngIf="password.invalid && (password.dirty || password.touched)" class="text-danger">
                                <div *ngIf="password.errors?.['required']">Es obligatorio introducir una contraseña</div>
                                <div *ngIf="password.errors?.['minlength']">La contraseña debe tener al menos 8 caracteres</div>
                                <div *ngIf="password.errors?.['maxlength']">La contraseña es demasiado larga</div>
                            </div>
                            <div class="mb-1"><input class="form-control" type="password" formControlName="password" id="password" placeholder="Contraseña*"></div>
                            
                            <div *ngIf="(((repeatPassword.value != password.value) || repeatPassword.invalid) && (repeatPassword.dirty || repeatPassword.touched))" class="text-danger">
                                <div *ngIf="!repeatPassword.errors?.['required'] && repeatPassword.value != password.value">Las contraseñas no coinciden</div>
                                <div *ngIf="repeatPassword.errors?.['required']">Es obligatorio repetir la contraseña</div>
                                <div *ngIf="repeatPassword.errors?.['minlength'] && repeatPassword.value == password.value">La contraseña debe tener al menos 8 caracteres</div>
                                <div *ngIf="repeatPassword.errors?.['maxlength'] && repeatPassword.value == password.value">La contraseña es demasiado larga</div>
                            </div>
                            <div class="mb-3"><input class="form-control" type="password" formControlName="repeatPassword" id="repeatPassword" placeholder="Repetir contraseña*"></div>
                            
                            <div *ngIf="changePasswordState=='LOADING'" class="mb-3"><button class="btn btn-primary d-block w-100 disabled" type="submit">
                                <div class="spinner-border next text-light justify-content-end me-2" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                Establecer nueva contraseña</button></div>
                            <div *ngIf="changePasswordState!=='LOADING'" class="mb-3"><button class="btn btn-primary d-block w-100" type="submit">Establecer nueva contraseña</button></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>